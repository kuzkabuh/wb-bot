{% extends "base.html" %}

{% block content %}
    {% if error %}
      <div class="alert alert-warning">{{ error }}</div>
    {% endif %}
    {% if needs_key %}
      <div class="alert alert-info">
        Для отображения данных WB сохраните API-ключ в настройках.
        <a href="/settings" class="btn btn-sm btn-primary ms-2">Открыть настройки</a>
      </div>
    {% else %}
      <div class="row g-3">
        <div class="col-md-6">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title mb-3">Профиль продавца (WB)</h5>
              {% if seller %}
                <div><b>Наименование:</b> {{ seller.name }}</div>
                <div><b>SID:</b> <code>{{ seller.sid }}</code></div>
                {% if seller.tradeMark %}
                  <div><b>Торговая марка:</b> {{ seller.tradeMark }}</div>
                {% endif %}
              {% else %}
                <div class="text-muted">Нет данных по продавцу.</div>
              {% endif %}
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card shadow-sm">
            <div class="card-body">
              <h5 class="card-title mb-3">Баланс (WB)</h5>
              {% if balance %}
                {# Выводим общую информацию по балансу: всего/активные/доступные к выводу. #}
                {% set total = balance.balance or balance.currentBalance or balance.total %}
                {% set avail = balance.forWithdraw or balance.available or balance.forWithdrawPresent %}
                <div><b>Всего:</b> {{ total }}</div>
                {% if avail %}
                  <div><b>Доступно к выводу:</b> {{ avail }}</div>
                {% endif %}
              {% else %}
                <div class="text-muted">Нет данных по балансу.</div>
              {% endif %}
            </div>
          </div>
        </div>
      </div>
    {% endif %}
{% endblock %}