{% extends "base.html" %}

{% block content %}
  <div class="" style="max-width:640px">
    {% if error %}
      <div class="alert alert-danger">{{ error }}</div>
    {% endif %}
    {% if saved %}
      <div class="alert alert-success">Сохранено.</div>
    {% endif %}
    {% if has_key and not saved %}
      <div class="alert alert-info">API-ключ уже сохранён. Вы можете заменить его новым.</div>
    {% endif %}
    {% if has_key %}
      <a class="btn btn-outline-primary mb-3" href="/check_token">Проверить токен</a>
    {% endif %}
    <form method="post" action="/settings" class="mt-3">
      <div class="mb-3">
        <label class="form-label" for="wb_api_key">WB API-ключ</label>
        <input id="wb_api_key" name="wb_api_key" type="password" class="form-control" placeholder="вставьте API-ключ" required>
        <div class="form-text">Ключ хранится зашифрованно и не отображается после сохранения.</div>
      </div>
      <div class="d-flex gap-2">
        <button class="btn btn-primary" type="submit">Сохранить</button>
        <a class="btn btn-secondary" href="/dashboard">Отмена</a>
      </div>
    </form>
  </div>
{% endblock %}